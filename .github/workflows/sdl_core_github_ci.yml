name: GitHub Actions Demo
on: [push]
jobs:
  buils:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2
    # install dependencies
    - name: install-dependencies
      run: sudo apt-get update && sudo apt-get install libssl-dev libbluetooth3 libbluetooth-dev libudev-dev cmake html2text lcov git cmake automake1.11 build-essential libavahi-client-dev sqlite3 libsqlite3-dev libgtest-dev bluez-tools libpulse-dev libusb-1.0.0-dev cppcheck python3-pip python3-setuptools && sudo apt-get install -f clang-format-6.0
    # build project
    - name: mkdir-and-cd
      run: mkdir build && cd build
    - name: cmake build
      run: cmake ../ -DBUILD_TESTS=ON
    - name: cmake make
      run: make install-3rd_party && make -j `nproc` install && sudo ldconfig
    # run tests
    - name: run test 1
      run: make test
